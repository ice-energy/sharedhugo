<!DOCTYPE html>
<html lang="en-us">

<head><style>
body {
	display: block;
	--colorBG: "#40e0d0, #ff8c00, #ff0080";
		background-image: var(--bgImage) !important;
	
}

body, body.pushable {
	background-repeat: no-repeat;
  	background-attachment: fixed;
  	background-size: cover !important;
}

</style><title>
CDC3 Specifications/Requirements
</title><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<meta name="author" content="Ice-Energy" />
	<meta name="description" content="This document will provide a list of specifications and requirements for the CDC3 controller.
CPU requirements The picture below shows the existing board architecture on CDC1/CDC2, and it also shows the changes proposed for CDC3.

The architectures are strikingly similary:
 Both have a seperate Network Controller on the Front-End Both have a beefy 32-bit CPU on the back-end for handling all the controls and sensors.  A newly updated CDC3:" />
<meta name="generator" content="Hugo 0.40.2" />

<link rel="shortcut icon" href="img/defaultFav.ico">

<link rel="canonical" href="https://ice-energy.github.io/sharedhugo/post/post_002/cdc3_specs_reqs/" />
<link rel="alternative" href="/sharedhugo/index.xml" title="IceEnergySharedHugo" type="application/atom+xml"/>
<link rel="stylesheet" type="text/css" href="/sharedhugo/css/semantic_2.3.1.min.css">
<style>
body.pushable {
	display: block;
		background-image: var(--bgImage) !important;
	 ;
}
</style>
<link rel="stylesheet" type="text/css" href="/sharedhugo/css/site.css">
<script>
	var colorBG = ""
	var enabledPost = true
	var isMobile = ( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) )
	console.log("The client device is a "+(isMobile?"mobile":"PC")+".")
</script>
</head>

<body><script>
var prevBgIndex = 0;
var bodyBgSwitchIndex = 0;
		var bgImage = "url(" + "" + ")"
	
	console.log("Current background: " + bgImage.substring(bgImage.indexOf("bg"), bgImage.length));
	document.body.style.setProperty('--blurEff',"");
	document.body.style.setProperty('--bgImage', bgImage);

	function getRandomInt(min, max) {
	  min = Math.ceil(min)
	  max = Math.floor(max)
	  var random
	  while (1) {
	    random = Math.floor(Math.random() * (max - min)) + min
	    if (random !== prevBgIndex) {
	      prevBgIndex = random
	      break
	    }
	  }
	  return random
	}

	function connect(arr) {
	  var str = ''
	  for (var i = 0; i < arr.length; i++) {
	    if (i !== arr.length - 1) {
	      str += arr[i] + ', '
	    } else {
	      str += arr[i]
	    }
	  }
	  return str
	}
</script><div class="blur-overlay"></div><div id="sidebar" class="ui sidebar inverted vertical menu">
	<section id="author" class="ui top attached center aligned inverted segment"><div class="ui small circular image">
	<img src="/sharedhugo/img/icelogo.png">
</div>
<h3 class="ui header">Ice-Energy
	<div class="sub header">Where we go One, We go All</div>
</h3>
</section><section class="ui attached center aligned inverted segment sidebar-dream-tags">
<a class="ui label" href="/sharedhugo/tags/cdc3/index.html" title="cdc3">cdc3</a>

<a class="ui label" href="/sharedhugo/tags/github/index.html" title="github">github</a>

</section>	
	
	<section class="ui attached inverted segment sidebar-dream-categories both flexbox">
		<div class="ui inverted accordion">
<div class="title">
	<i class="dropdown icon"></i>
	<a class="link" href="/sharedhugo/categories/systems/solutions/index.html">systems/solutions</a>
</div>
<div class="content">

	<a class="item" href="https://ice-energy.github.io/sharedhugo/post/post_002/cdc3_specs_reqs/index.html">
		<div>
			<i class="cocktail icon"></i>
			<p>CDC3 Specifications/Requirements</p>
		</div>
	</a>

	<a class="item" href="https://ice-energy.github.io/sharedhugo/post/post_001/githubhugo/index.html">
		<div>
			<i class="cocktail icon"></i>
			<p>Github Plus Hugo</p>
		</div>
	</a>

</div>

</div>
	</section>
	
	
	<section id="footer" class="ui bottom attached center aligned inverted segment">
<p>© 2019 IceEnergySharedHugo</p>
    
<p>Powered by <a href="https://gohugo.io/" target="_blank">Hugo</a> with <a href="https://github.com/UtkarshVerma/hugo-dream-plus" target="_blank">Dream Plus</a> theme.</p></section>
</div>
<div class="pusher">
		<div class="flipper">
			<div class="front">
<nav class="ui top secondary menu bar">
	<div class="item">
		<i class="inverted big link bullseye icon dream-flip-toggle" title="About Me"></i>
	</div><div class="item">
		<a href="/sharedhugo/index.html">
			<i class="inverted big link home icon" title="Home"></i>
		</a>
	</div>
	<div class="item">
		<a href="/sharedhugo/post/index.html">
			<i class="inverted big link archive icon" title="Archive"></i>
		</a>
	</div>
	<div class="item">
		<a href="/sharedhugo/tags/index.html">
			<i class="inverted big link tags icon" title="All Tags"></i>
		</a>
	</div>
	<div class="item">
		<a href="/sharedhugo/categories/index.html">
			<i class="inverted big link cubes icon" title="All Categories"></i>
		</a>
    </div>
	<div class="ui container tablet computer only grid">
		<div class="item" onClick="$('.ui.sidebar').sidebar('setting', 'transition', 'overlay').sidebar('toggle');">
			<i class="inverted big link sidebar icon" title="Show Sidebar"></i>
		</div>
	</div>
	
</nav>


<div class="ui centered grid">
	<div class="sixteen wide mobile only column"><div class="ui inverted accordion">
	<div id="header" class="ui inverted segment column box">
		<header id="author" class="ui top attached center aligned inverted segment"><div class="ui small circular image">
	<img src="/sharedhugo/img/icelogo.png">
</div>
<h3 class="ui header">Ice-Energy
	<div class="sub header">Where we go One, We go All</div>
</h3>
</header>
		<div class=" title header-title"><div id="tag-category-pop" class="ui red right corner label">		
				<i class="hand point icon down"title="Click this to pop tags and categories"></i>		
			</div></div>
		<div id="tag-category" class=" content"><section class="ui attached center aligned inverted segment dream-tags none flexbox">
<a class="ui label" href="/sharedhugo/tags/cdc3/index.html" title="cdc3">cdc3</a>

<a class="ui label" href="/sharedhugo/tags/github/index.html" title="github">github</a>

</section><section class="ui attached inverted segment dream-categories both flexbox">
			<div class="inverted accordion">
<div class="title">
	<i class="dropdown icon"></i>
	<a class="link" href="/sharedhugo/categories/systems/solutions/index.html">systems/solutions</a>
</div>
<div class="content">

	<a class="item" href="https://ice-energy.github.io/sharedhugo/post/post_002/cdc3_specs_reqs/index.html">
		<div>
			<i class="cocktail icon"></i>
			<p>CDC3 Specifications/Requirements</p>
		</div>
	</a>

	<a class="item" href="https://ice-energy.github.io/sharedhugo/post/post_001/githubhugo/index.html">
		<div>
			<i class="cocktail icon"></i>
			<p>Github Plus Hugo</p>
		</div>
	</a>

</div>

</div>
			</section></div>
		<footer class="ui bottom attached center aligned inverted segment">
<p>© 2019 IceEnergySharedHugo</p>
    
<p>Powered by <a href="https://gohugo.io/" target="_blank">Hugo</a> with <a href="https://github.com/UtkarshVerma/hugo-dream-plus" target="_blank">Dream Plus</a> theme.</p></footer>
	</div>
</div></div>
	<div class="sixteen wide mobile fifteen wide tablet twelve wide computer column post-list">
		<section class="ui secondary top attached black segment post-head">
			<h1 class="post-title">
				CDC3 Specifications/Requirements
			</h1>
			<div class="sub header">
					<div><span><i class="calendar outline icon"></i>Feb 7, 2019</span></div>
					<div><span><i class="clock outline icon"></i>6 min read</span></div>
					<div><span><i class="angle double up icon"></i>Last updated on Feb 7, 2019</span></div>
			</div>
			<hr><div class="toc"><nav id="TableOfContents">
<ul>
<li><a href="#cpu-requirements">CPU requirements</a>
<ul>
<li>
<ul>
<li><a href="#cdc-controller-cpu">CDC Controller CPU</a></li>
<li><a href="#cpu-reference-platform">CPU Reference Platform</a></li>
<li><a href="#on-board-jtag-debugger">On-Board JTAG debugger</a></li>
<li><a href="#linux-sbc">Linux SBC</a></li>
</ul></li>
</ul></li>
<li><a href="#digital-sensor-bus">Digital Sensor Bus</a>
<ul>
<li>
<ul>
<li><a href="#1-wire-connectors">1-Wire Connectors</a></li>
</ul></li>
</ul></li>
<li><a href="#digital-inputs">Digital Inputs</a>
<ul>
<li>
<ul>
<li><a href="#5v-digital-inputs">5v Digital Inputs</a></li>
<li><a href="#24v-ac-dc-digital-input">24V AC/DC Digital Input.</a></li>
</ul></li>
</ul></li>
<li><a href="#how-d-you-do-that">How&rsquo;d you do that?</a></li>
<li><a href="#how-do-you-keep-documents-private">How do you keep documents private?</a></li>
<li><a href="#a-few-more-notes">A few more notes</a></li>
</ul>
</nav></div>
			
			
			<article class="post-content twemoji">
				

<p><img src="../img/cdc3specs.jpg" alt="pic1" /></p>

<hr />

<p>This document will provide a list of specifications and requirements for the CDC3
controller.</p>

<hr />

<h1 id="cpu-requirements">CPU requirements&nbsp;<a class="anchor" href="#cpu-requirements"><i class="small linkify icon"></i></a> </h1>

<p>The picture below shows the existing board architecture on CDC1/CDC2,
and it also shows the changes proposed for CDC3.</p>

<p><img src="../img/cdc_arch.jpg" alt="pic2" /></p>

<p><br><br>
The architectures are strikingly similary:</p>

<ul>
<li>Both have a seperate Network Controller on the Front-End</li>
<li>Both have a beefy 32-bit CPU on the back-end for handling all the controls and sensors.</li>
</ul>

<p>A newly updated CDC3:</p>

<ul>
<li>Replaces Blackfin CPU with more highly integrated and standard ARM CPU</li>
<li>Uses highly functional Linux Single Board Computer for the network front-end.</li>
</ul>

<h3 id="cdc-controller-cpu">CDC Controller CPU&nbsp;<a class="anchor" href="#cdc-controller-cpu"><i class="small linkify icon"></i></a> </h3>

<pre><code>STM32407IG:  ARM Cortex-M4 core with DSP and FPU, 1 Mbyte Flash, 168Mhz, ART Accelerator.
             192+4 Kbytes SRAM including 64-Kbyte of CCM data RAM
</code></pre>

<p>The 407IG is a more highly integrated part than the Blackfin, and there are several
chips external to the Blackfin that are no longer needed due to the 407IG having the
functionality built-in and on-chip.    Chip savings include:</p>

<ul>
<li>Real-Time clock</li>
<li>the i2c DAC chip</li>
<li>Flash memory</li>
<li>Ram memory</li>
<li>the 8MB spi flash chip</li>
</ul>

<h3 id="cpu-reference-platform">CPU Reference Platform&nbsp;<a class="anchor" href="#cpu-reference-platform"><i class="small linkify icon"></i></a> </h3>

<p><a href="http://armstrap.org/eagle/">armstrap.org/eagle</a></p>

<p><a href="https://ice-energy.github.io/sharedhugo/post/post_002/img/Schematic.pdf">Schematic</a></p>

<p><img src="../img/eagleboard.jpg" alt="pic3" /></p>

<h3 id="on-board-jtag-debugger">On-Board JTAG debugger&nbsp;<a class="anchor" href="#on-board-jtag-debugger"><i class="small linkify icon"></i></a> </h3>

<p>The reference platform from above includes an additional CPU which then
serves as a dedicated JTAG debugger.</p>

<p>Any of the STM32F103 family of processors will work for this, for example:</p>

<ul>
<li>STM32F103C8T6</li>
</ul>

<h3 id="linux-sbc">Linux SBC&nbsp;<a class="anchor" href="#linux-sbc"><i class="small linkify icon"></i></a> </h3>

<p>Candidates for Linux SBC include:</p>

<ul>
<li><a href="http://beaglecore.com/">beaglebone on a module</a></li>
<li><a href="https://www.raspberrypi.org/products/compute-module-3/">Raspberry Pi on a module</a></li>
<li><a href="https://www.variscite.com/products/system-on-module-som/">dart modules variscite</a></li>
</ul>

<p>Any of these will work and some are more integrated than others (including wifi).</p>

<p>I am in favor of the Raspberry Pi Compute Module, mainly due to the
Software and Distro support.</p>

<p><img src="../img/computemodule.png" alt="pic4" /></p>

<hr />

<h1 id="digital-sensor-bus">Digital Sensor Bus&nbsp;<a class="anchor" href="#digital-sensor-bus"><i class="small linkify icon"></i></a> </h1>

<p>The standard 8 port 1-Wire solution from CDC1 will be used.</p>

<p>IceBears&rsquo; currently use up to 5 of the 1-Wire ports:</p>

<ul>
<li>I0.OAt, A1.SAt, A1.RAt, A2.SAt, A2.RAt</li>
</ul>

<p>Only temperature type 1-Wire sensors are used.    There&rsquo;s place-holders in the code
to use other type of sensors (humidity for example), but they are not ever used.</p>

<h3 id="1-wire-connectors">1-Wire Connectors&nbsp;<a class="anchor" href="#1-wire-connectors"><i class="small linkify icon"></i></a> </h3>

<p>These sensors are frequently installed in the field, so they need to be easy to work with
for the technicians.</p>

<p>Keep the connectors same as in CDC1.<br />
This means the techs will not have to crimp wires in the field.</p>

<p><img src="../img/onewireconnectors.jpg" alt="pic5" /></p>

<hr />

<h1 id="digital-inputs">Digital Inputs&nbsp;<a class="anchor" href="#digital-inputs"><i class="small linkify icon"></i></a> </h1>

<p>There are 2 categories of Digital Inputs:
   - need 8: standard 0-5v GPIOs
   - need 7: 24V AC/DC   (round to 8??)</p>

<h3 id="5v-digital-inputs">5v Digital Inputs&nbsp;<a class="anchor" href="#5v-digital-inputs"><i class="small linkify icon"></i></a> </h3>

<p>The standard header that is used on CDC1 for Digital Inputs
can be used.   In addition to the actual Pin ports, there are
extra ports for 5v and GND.   Those can remain.</p>

<p><img src="../img/digioconnectors.jpg" alt="pic6" /></p>

<p>4 of the Digital Inputs are mapped to:</p>

<ul>
<li>Make Ice</li>
<li>Melt Ice</li>
<li>System Off</li>
<li>System Bypass</li>
</ul>

<p>The other 4 are used for Bear functionality:</p>

<ul>
<li>I0.RPd3 &nbsp; &nbsp; &nbsp; &nbsp; is the refrigerant pump fault</li>
<li>TargetCompOn2  &nbsp; &nbsp; &nbsp; &nbsp; optional, indicates if Target Compressor #2 is on</li>
<li>DR1 &nbsp; &nbsp; &nbsp; &nbsp; reflects state of DR #1 device</li>
<li>DR2 &nbsp; &nbsp; &nbsp; &nbsp; reflects state of DR #2 device</li>
</ul>

<p>Needs for TargetCompOn2, DR1, DR2 as digital inputs would go away
when these signals are more properly mapped to 24V AC/DC.   Right
now the techs have to wire these up with external relays.</p>

<h3 id="24v-ac-dc-digital-input">24V AC/DC Digital Input.&nbsp;<a class="anchor" href="#24v-ac-dc-digital-input"><i class="small linkify icon"></i></a> </h3>

<p>&nbsp; &nbsp; (2VDC / 3VAC Threshold)</p>

<p>Right now, the Bear has 4 of these ports: I1, I2, I3, I4.
They are used for:</p>

<ul>
<li>Z1S1  &nbsp; &nbsp; &nbsp; &nbsp;    zone #1 call for cooling</li>
<li>Z2S1    &nbsp; &nbsp; &nbsp; &nbsp;  zone #2 call for cooling</li>
<li>RDisable1 &nbsp; &nbsp; &nbsp; &nbsp; Remote Disable signal from zone #1</li>
<li>TargetCompOn1  &nbsp; Reflects state of Target Compressor #1</li>
</ul>

<p><img src="../img/in24vconnectors.jpg" alt="pic7" /></p>

<p>3 additional high-voltage inputs could be utilized for signals
currently being routed to the 5v inputs:</p>

<ul>
<li>TargetCompOn2</li>
<li>DR1</li>
<li>DR2</li>
</ul>

<h1 id="how-d-you-do-that">How&rsquo;d you do that?&nbsp;<a class="anchor" href="#how-d-you-do-that"><i class="small linkify icon"></i></a> </h1>

<p>While Github is known as a source code repository, it is also something else:</p>

<blockquote>
<p>If the repository you are storing ALSO happens to be a Static Website,
  Github can serve up pages from the site.</p>
</blockquote>

<p><strong>Let that sink in!</strong></p>

<pre><code>
It's completely unprecendented to have your code repository
ALSO serve up web-pages that happen to be stored there.

The key concept is that checking in your code and pushing
the resulting git branch to the server is EQUIVALENT to publishing
your website.

It's a new paradigm, and it's really incredible.  It makes
Documentation Management incredibly easy!

</code></pre>

<p>With proper configuration of the github repository, and proper layout
of the data you are storing there, <strong>github can serve up the pages</strong>.</p>

<p>With Hugo installed locally on my linux workstation, here&rsquo;s the process I use
for creating that website:</p>

<ul>
<li>edit content, simple .txt file</li>
<li>Run Hugo from within a shell script.  This generates the entire static site.</li>
<li>use git to check-in changes, and push to Server</li>
<li>browse to site, wait a bit for changes to propagate</li>
</ul>

<h1 id="how-do-you-keep-documents-private">How do you keep documents private?&nbsp;<a class="anchor" href="#how-do-you-keep-documents-private"><i class="small linkify icon"></i></a> </h1>

<p>1st of all, pay the $99 fee.   That means the repositories are private, but the
website pages are not.    The key is knowing where the publicly
browsable files are, and not putting private documents there.</p>

<p>The solution to pub/priv relies on a logical arrangement of the source code tree.</p>

<p>See the repositories at:</p>

<ul>
<li><a href="https://github.com/ice-energy/jreed">github.com/ice-energy/jreed</a></li>
<li><a href="https://github.com/ice-energy/user1">github.com/ice-energy/user1</a></li>
<li><a href="https://github.com/ice-energy/user9">github.com/ice-energy/user9</a></li>
</ul>

<p>Each of those repo&rsquo;s have 2 content directories, which are the <em>Source Material</em> of
the documents.</p>

<ul>
<li><a href="https://github.com/ice-energy/jreed/tree/master/content_pub">content_pub</a> &nbsp; &nbsp; &nbsp;  publicly browsable content.</li>
<li><a href="https://github.com/ice-energy/jreed/tree/master/content_priv">content_priv</a> &nbsp; &nbsp; &nbsp; private content, not to be displayed on github.</li>
</ul>

<p>My technique for public/private then is to generate 2 different
sites, that are completely seperate:</p>

<ul>
<li>One meant for public viewing on github</li>
<li>The 2nd one stored on github, <strong>But must be copied somewhere else to be displayed</strong></li>
</ul>

<p>To do this requires executing Hugo twice while using the proper Source and
Destination flags.</p>

<p><em>For the publicly visible:</em></p>

<pre><code>  hugo -c &quot;./content_pub&quot; -d &quot;./docs&quot;
</code></pre>

<p><em>To remain private:</em></p>

<pre><code>  hugo -c &quot;./content_priv&quot; -d &quot;./docs_priv&quot;
</code></pre>

<p>The 2 output directories, <em>docs</em> and <em>docs_priv</em>, are both:</p>

<blockquote>
<p>Standalone, Static, Hugo-Based Websites</p>
</blockquote>

<p><em>docs</em> gets displayed by github as default.  <em>docs_priv</em> will have to
be copied somewhere else to be displayed.</p>

<h1 id="a-few-more-notes">A few more notes&nbsp;<a class="anchor" href="#a-few-more-notes"><i class="small linkify icon"></i></a> </h1>

<p>See the file <a href="https://github.com/ice-energy/jreed/blob/master/x.sh">x.sh</a>.
It&rsquo;s the shell script that automates the running of Hugo.</p>

<p>My platform is <em>linux</em>, there&rsquo;d be just a bit of work to do getting this
to run on Windows.   <em>x.sh</em> might have to be turned into a .bat file.
Haven&rsquo;t done that yet.    <em>Hugo</em> is supposed to run fine on Windows, but
again, something I haven&rsquo;t done yet.</p>

<p>Hugo should also be supported on Mac.</p>

<p>I&rsquo;d be glad to help anyone get this up and running for themselves.
Also, it&rsquo;s not too difficult to set up different themes from gohugo.io.</p>

<p>JR</p>

			</article>
		</section>
		<section class="ui secondary attached segment dream-tags">
<a class="ui label" href="/sharedhugo/tags/cdc3/index.html" title="cdc3">cdc3</a>

<a class="ui label" href="/sharedhugo/tags/github/index.html" title="github">github</a>


		</section>
	</div>
</div>

			</div>
			<div class="back"><nav class="ui top secondary menu bar">
	<div class="item">
		<i class="inverted big link bullseye icon dream-flip-toggle" title="About Me"></i>
	</div><div class="item">
	<a href="https://github.com/ice-energy/sharedhugo" target="_blank">
		<i id="ico" class="inverted big link github icon" title="GitHub"></i>
	</a>
</div>
<div class="item">
	<a href="mailto:software@ice-energy.com">
		<i id="ico" class="inverted big link mail icon" title="Email"></i>
	</a>
</div>

</nav>
<div class="ui centered grid about">
	<div class="sixteen wide mobile fifteen wide tablet fifteen wide computer column about">
		<section class="ui stacked segments"><div class="ui inverted segment">
	<article class="twemoji"><h1>IceEnergy sharedhugo</h1>

<hr />

<p><br>
placeholder</article>
</div></section>
	</div>
</div></div>
		</div>
	</div><script src="/sharedhugo/js/jquery_3.3.1.min.js"></script>
<script src="/sharedhugo/js/site.js"></script>
<script src="/sharedhugo/js/semantic_2.3.1.min.js"></script>



</body>

</html>